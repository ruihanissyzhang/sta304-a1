---
title: "problem set1"
author: "ruihan zhang"
date: 2020-09-26T21:13:14-05:00
bibliography: "references.bib"
categories: ["R"]
tags: ["R Markdown", "plot", "regression"]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE)
```
# Part1. Abstraction
My abstract. We use @citetidyverse.


# Introduction
This dataset is about the outbreaks in Toronto healthcare institutions
(including hospitals, long-term care homes and retirement homes). 
These healthcare institutions have the responsibility to monitor staff 
and patients/residents for signs and symptoms of gastroenteric and respiratory
such as nausea, vomiting, diarrhea, fever, cough, runny nose and sore throat.
If the rate of infection or illness increase locally or higher than expectation,we call it "outbreak".

# Data introduction
Introduce the scenario and study objectives.

Outbreak setting: The type of facility, in terms of the type of healthcare    provided

Type of outbreak: The mode of transmission classification description of the outbreak

Causative agent-1: The aetiological agent(s) that have been identified from one or more outbreak-related cases, when an agent is confirmed.

Time: the time of breakout last.

I removed some variables from the original data, here is the reasons I removed them:

Causative Agent - 2: 

# Code part

```{r outbreak}
install.packages("opendatatoronto")
library(opendatatoronto)
library(dplyr)

library(tidyverse)
# get package
package <- show_package("80ce0bd7-adb2-4568-b9d7-712f6ba38e4e")
package

resources <- list_package_resources("80ce0bd7-adb2-4568-b9d7-712f6ba38e4e")
datastore_resources <- filter(resources, tolower(format)%in%c('xlsx','ob_report_2020'))

data <- filter(datastore_resources,row_number()==2) %>% get_resource()
data


colSums(is.na(data))

data1 = data %>%
  select(-`Causative Agent - 2`)

data1 = data1[!data1$`Causative Agent - 1` %in% c('Unable to identify'),]

data1$`time` = difftime(data1$`Date Declared Over`,data1$`Date Outbreak Began`,units="days")


data1 = data1 %>%
  select(-`Institution Address`)

data1 = data1[!data1$Active %in% c('Y'),]

data1 = data1 %>%
  select(-Active)

data1 = data1 %>%
  select(-`Date Outbreak Began`, -`Date Declared Over`)

ggplot(data = data1,aes(x = `time`)) + 
  geom_histogram(color='grey', fill='purple',bins= 10)

```



# Reference
